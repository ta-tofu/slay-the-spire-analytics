# Slay the Spire Analytics Tool

## Project Overview

This tool analyzes Slay the Spire gameplay records (.run files) to calculate win rates, defeat causes, and detailed statistics for Ascension 20 Heart clears. The analytics focus specifically on the most challenging difficulty level (Ascension 20) and tracks successful completions against The Heart, the game's ultimate boss.

The tool provides comprehensive analysis of your gameplay data, helping you understand your performance patterns, identify areas for improvement, and track your progress across different characters in Slay the Spire.

## Features

This analytics tool offers several key features for analyzing your Slay the Spire gameplay:

### Core Analytics
- **Clear Rate Calculation**: Determines your success rate for Ascension 20 Heart victories per character
- **Defeat Cause Analysis**: Identifies the top reasons for run failures and most challenging encounters
- **Character Comparison**: Compares statistics across all four characters (Defect, Ironclad, The Silent, Watcher)
- **Detailed Statistics**: Provides comprehensive data including play time, floor distribution, and victory patterns

### Analysis Types
- **Basic Analysis**: Core clear rates, record counts, and Heart clear statistics
- **Detailed Analysis**: Advanced metrics including defeat causes, floor distribution, average play time, and character comparisons
- **Victory Classification**: Distinguishes between Heart clears and other Act 3 boss victories

### Supported Characters
- **DEFECT**: Orb-focused character analysis
- **IRONCLAD**: Strength-based character analysis  
- **THE_SILENT**: Poison/card manipulation character analysis
- **WATCHER**: Stance-switching character analysis

## Requirements

To use this analytics tool, you need:

- **Python 3.6 or higher**
- **Slay the Spire installed** with existing gameplay records
- **Access to .run files** (gameplay record files generated by Slay the Spire)

### .run File Location
The tool requires access to Slay the Spire's .run files, typically located at:
- **Windows**: `C:\SteamLibrary\steamapps\common\SlayTheSpire\runs\`
- **Note**: Drive letter may vary depending on your Steam installation location

### Finding Your .run Files
1. Open Steam Library
2. Right-click on Slay the Spire → "Properties"
3. Go to "Local Files" tab → "Browse Local Files"
4. Navigate to the `runs` folder

## Usage

### Setup
1. **Clone or download the repository**
   ```bash
   git clone <repository-url>
   cd slay-the-spire-analytics
   ```

2. **Copy scripts to your runs folder**
   - Place `analyze_clear_rate.py` and `detailed_analysis.py` in your Slay the Spire `runs` folder
   - The folder structure should look like:
   ```
   runs/
   ├── DEFECT/           # Defect character .run files
   ├── IRONCLAD/         # Ironclad character .run files
   ├── THE_SILENT/       # The Silent character .run files
   ├── WATCHER/          # Watcher character .run files
   ├── analyze_clear_rate.py
   ├── detailed_analysis.py
   └── README_en.md
   ```

### Running Analysis

#### Basic Clear Rate Analysis
```bash
python analyze_clear_rate.py
```
This script provides:
- Record count per character for Ascension 20
- Heart clear counts and rates
- List of successful Heart clear runs
- Overall statistics summary

#### Detailed Analysis
```bash
python detailed_analysis.py
```
This script provides:
- Basic statistics (records, clears, win rates)
- Top 5 defeat causes analysis
- Floor distribution (defeats by Act)
- Average play time metrics
- Average floor reached
- Character comparison summary

#### Batch Analysis (if available)
```bash
python run_all_analysis.py
```
Runs both analysis scripts sequentially for comprehensive reporting.

### Example Commands
Navigate to your runs folder and execute:
```bash
# Basic analysis
python analyze_clear_rate.py

# Detailed analysis with defeat causes
python detailed_analysis.py
```

## Output

The analytics tool generates detailed reports in table format with the following information:

### Basic Analysis Output
| Character   | Records | Heart Clears | Clear Rate | Total Win Rate |
|-------------|---------|--------------|------------|----------------|
| DEFECT      | XXX     | XX           | X.XX%      | X.XX%          |
| IRONCLAD    | XXX     | XX           | X.XX%      | X.XX%          |
| THE_SILENT  | XXX     | XX           | X.XX%      | X.XX%          |
| WATCHER     | XXX     | XX           | X.XX%      | X.XX%          |
| **Overall** | **XXX** | **XX**       | **X.XX%**  | **X.XX%**      |

*Actual numbers will vary based on your gameplay records.*

### Detailed Analysis Output
- **Victory Statistics**: Comprehensive win/loss breakdown
- **Defeat Analysis**: Top 5 most common defeat causes with frequency
- **Floor Distribution**: Number of defeats per Act (1-4)
- **Performance Metrics**: Average play time and floor reached
- **Character Insights**: Comparative analysis across all characters

### Analysis Criteria
- **Ascension Level 20 only**: Only the highest difficulty level
- **Heart Victory Definition**: Must reach and defeat The Heart (floor 57) to count as "clear"
- **Other Victories**: Act 3 boss victories are tracked separately as "other wins"

## Contributing and License

### Contributing
We welcome contributions to improve this analytics tool! Here are some areas for potential enhancement:

- Time-series analysis of clear rate progression
- Deck composition and clear rate correlation analysis
- Relic selection pattern analysis
- Visualization features (graph generation)
- CSV export functionality
- Additional statistical metrics (standard deviation, confidence intervals)
- Command-line argument support for configuration
- Support for other Ascension levels

### How to Contribute
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Submit a pull request with a clear description

### License
This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for full details.

## Contact

For bug reports, feature requests, or general questions:

- **Issues**: Please use [GitHub Issues](https://github.com/ta-tofu/slay-the-spire-analytics/issues) to report bugs or request features
- **Discussions**: Use GitHub Discussions for general questions and community interaction

### Important Notes
- This tool is designed for personal gameplay record analysis
- .run files contain personal gameplay information; exercise caution when sharing
- Slay the Spire updates may change .run file formats, potentially requiring tool updates

---

*Slay the Spire © Mega Crit Games*